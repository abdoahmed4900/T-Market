<main class="mx-4">
   <form [formGroup]="registerForm" (ngSubmit)="register()" novalidate>
     <div class="flex flex-col gap-5 max-w-[500px] min-w-[280px] mx-auto my-auto mt-20 p-6 pb-4 border border-gray-500 rounded-lg shadow-lg">
     <h1 class="text-2xl font-bold text-[var(--primary-text-color)]">{{'AUTH.REGISTER.TITLE' | translate}}</h1>
     <p class="text-[var(--secondary-text-color)] text-[14px]">{{'AUTH.REGISTER.SUBTITLE' | translate}}</p>
     <div class="email-container flex flex-col gap-1">
        <label for="name" class="text-[14px] font-bold text-[var(--primary-text-color)]">{{'AUTH.LABELS.USERNAME' | translate}}</label>
        <input class="outline-none border-2 rounded-lg p-2 text-[var(--primary-text-color)]" type="text" name="name" id="text" formControlName="name" placeholder="{{'AUTH.PLACEHOLDERS.USERNAME' | translate}}" [ngClass]="{
            'border-[var(--error-text-color)]': registerForm.get('name')?.invalid && registerForm.get('name')?.touched,
            'border-gray-300': registerForm.get('name')?.valid || !registerForm.get('name')?.touched,
            'focus:border-[var(--primary-color)]': (registerForm.get('name')?.valid && registerForm.get('name')?.touched),
            'focus:border-[var(--error-text-color)]': !(registerForm.get('name')?.invalid && registerForm.get('name')?.touched),
        }"/>
        @if (registerForm.get('name')?.hasError('required') && registerForm.get('name')?.touched) {
            <span class="text-[var(--error-text-color)] font-bold mt-2 text-[12px]">{{'AUTH.VALIDATIONS.REQUIRED' | translate: {field: 'AUTH.LABELS.USERNAME' | translate} }}</span>
        }
        @if (registerForm.get('name')?.hasError('minlength') && registerForm.get('name')?.touched) {
            <span class="text-[var(--error-text-color)] font-bold mt-2 text-[12px]">{{'AUTH.VALIDATIONS.MIN_LENGTH' | translate: {length: 3, field: 'AUTH.LABELS.USERNAME' | translate} }}</span>
        }
     </div>
     <div class="email-container flex flex-col gap-1">
        <label for="role" class="text-[14px] font-bold text-[var(--primary-text-color)]">{{'AUTH.LABELS.ROLE' | translate}}</label>
        <select class="outline-none focus:border-[var(--primary-color)] border-2 rounded-lg p-2 text-[var(--primary-text-color)]" (change)="selectRole($event)" name="role" id="role">
            <option value="{{'AUTH.ROLES.BUYER' | translate}}">{{'AUTH.ROLES.BUYER' | translate}}</option>
            <option value="{{'AUTH.ROLES.SELLER' | translate}}">{{'AUTH.ROLES.SELLER' | translate}}</option>
        </select>
     </div>
     <div class="email-container flex flex-col gap-1">
        <label for="email" class="text-[14px] font-bold text-[var(--primary-text-color)]">{{'AUTH.LABELS.EMAIL' | translate}}</label>
        <input class="outline-none focus:border-[var(--primary-color)] border-2 rounded-lg p-2 text-[var(--primary-text-color)]" type="email" name="email" id="email" formControlName="email" placeholder="{{'AUTH.PLACEHOLDERS.EMAIL' | translate}}" [ngClass]="{
            'border-[var(--error-text-color)]': registerForm.get('email')?.invalid && registerForm.get('email')?.touched,
            'border-gray-300': registerForm.get('email')?.valid || !registerForm.get('email')?.touched,
            'focus:border-[var(--primary-color)]': (registerForm.get('email')?.valid && registerForm.get('email')?.touched),
            'focus:border-[var(--error-text-color)]': !(registerForm.get('email')?.invalid && registerForm.get('email')?.touched),
        }"/>
        @if (registerForm.get('email')?.hasError('required') && registerForm.get('email')?.touched) {
            <span class="text-[var(--error-text-color)] font-bold mt-2 text-[12px]">{{'AUTH.VALIDATIONS.REQUIRED' | translate: {field: 'AUTH.LABELS.EMAIL' | translate} }}</span>
        }
        @if (registerForm.get('email')?.hasError('email') && registerForm.get('email')?.touched) {
            <span class="text-[var(--error-text-color)] font-bold mt-2 text-[12px]">{{'AUTH.VALIDATIONS.INVALID' | translate: {field: 'AUTH.LABELS.EMAIL' | translate} }}</span>
        }
     </div>
     <div class="password-container flex flex-col gap-1 relative">
        <label for="password" class="text-[14px] font-bold text-[var(--primary-text-color)]">{{'AUTH.LABELS.PASSWORD' | translate}}</label>
        <input class="outline-none focus:border-[var(--primary-color)] border-2 border-gray-300 rounded-lg p-2 text-[var(--primary-text-color)]" [type]="isPasswordVisible ? 'text' : 'password'" formControlName="password" name="password" id="password" placeholder="{{'AUTH.PLACEHOLDERS.PASSWORD' | translate}}" [ngClass]="{
            'border-[var(--error-text-color)]': registerForm.get('password')?.invalid && registerForm.get('password')?.touched,
            'border-gray-300': registerForm.get('password')?.valid || !registerForm.get('password')?.touched,
             'focus:border-[var(--primary-color)]': (registerForm.get('password')?.valid && registerForm.get('password')?.touched),
            'focus:border-[var(--error-text-color)]': !(registerForm.get('password')?.invalid && registerForm.get('password')?.touched),
        }"/>
        <button class="paassword-icon absolute top-[38px] end-3 cursor-pointer text-[var(--primary-text-color)]" (click)="togglePasswordVisibility()">
            <fa-icon [icon]="passwordIcon" />
        </button>
        @if (registerForm.get('password')?.invalid && registerForm.get('password')?.touched) {
            @if (registerForm.get('password')?.hasError('required') && registerForm.get('password')?.touched) {
              <span class="text-[var(--error-text-color)] font-bold mt-2 text-[12px]">{{'AUTH.VALIDATIONS.REQUIRED' | translate: {field: 'AUTH.LABELS.PASSWORD' | translate} }}</span>
            }
            @if (registerForm.get('password')?.hasError('minlength') && registerForm.get('password')?.touched) {
              <span class="text-[var(--error-text-color)] font-bold mt-2 text-[12px]">{{'AUTH.VALIDATIONS.MIN_LENGTH' | translate: {length: 6, field: 'AUTH.LABELS.PASSWORD' | translate} }}</span>
            }
        }
     </div>
     <div class="password-container flex flex-col gap-1 relative">
        <label for="confrim-password" class="text-[14px] text-[var(--primary-text-color)] font-bold">{{'AUTH.LABELS.CONFIRM_PASSWORD' | translate}}</label>
        <input class="outline-none focus:border-[var(--primary-color)] border-2 border-gray-300 rounded-lg p-2 text-[var(--primary-text-color)]" [type]="isPasswordVisible ? 'text' : 'password'" formControlName="confirmPassword" name="confrim-password" id="confrim-password" placeholder="{{'AUTH.PLACEHOLDERS.CONFIRM_PASSWORD' | translate}}" [ngClass]="{
            'border-[var(--error-text-color)]': registerForm.get('confirmPassword')?.invalid && registerForm.get('confirmPassword')?.touched,
            'border-gray-300': registerForm.get('confirmPassword')?.valid || !registerForm.get('confirmPassword')?.touched,
            'focus:border-[var(--primary-color)]': (registerForm.get('confirmPassword')?.valid && registerForm.get('confirmPassword')?.touched),
            'focus:border-[var(--error-text-color)]': !(registerForm.get('confirmPassword')?.invalid && registerForm.get('confirmPassword')?.touched),
        }"/>
        @if (registerForm.get('confirmPassword')?.touched  && registerForm.get('confirmPassword')?.invalid) {
            @if (registerForm.get('confirmPassword')?.hasError('required')) {
              <span class="text-[var(--error-text-color)] font-bold mt-2 text-[12px]">{{'AUTH.VALIDATIONS.REQUIRED' | translate: {field: 'AUTH.LABELS.CONFIRM_PASSWORD' | translate} }}</span>
            }
            @if (registerForm.get('confirmPassword')?.hasError('mismatch')) {
              <span class="text-[var(--error-text-color)] font-bold mt-2 text-[12px]">{{'AUTH.VALIDATIONS.PASSWORDS_DO_NOT_MATCH' | translate}}</span>
            }
        }
     </div>
     <input value="{{'AUTH.REGISTER.BUTTON' | translate}}" type="submit" class="rounded-lg p-2 text-white bg-[var(--primary-color)] hover:opacity-90"/>
     <a routerLink="/login" class="mx-auto text-[14px]"><span class="text-[var(--secondary-text-color)]">{{'AUTH.REGISTER.HAVE_ACCOUNT' | translate}} </span> <span class="text-[var(--primary-color)]">{{'AUTH.REGISTER.LOGIN' | translate}}</span></a>
     </div>
    </form>
</main>